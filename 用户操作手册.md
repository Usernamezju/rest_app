# 国庆餐馆管理系统 · 使用手册

## 一、快速启动

### 首次安装
1. 安装 Python 3.8+（官网 https://python.org 下载，安装时勾选"Add to PATH"）
2. 将整个 `guoqing_restaurant_system` 文件夹放到电脑桌面
3. 双击 `run_server.bat`，系统会自动安装依赖、初始化数据库并启动

### 日常启动
每天营业前双击 `run_server.bat` 即可，关机前关闭命令行窗口。

---

## 二、管理后台使用

访问地址：`http://localhost:5000/admin`  
默认密码：`guoqing888`（可在 config.py 中修改）

### 仪表盘
- 查看今日营业额、订单数、待处理订单
- 近7天收入趋势图
- 实时活跃订单列表（每15秒自动刷新）

### 菜品管理
- **添加分类**：如"招牌菜"、"凉菜"等
- **添加菜品**：填写名称、价格、分类、描述，可上传手机拍的菜品照片（自动压缩）
- **上下架**：点击开关按钮，售罄时关闭，顾客端即时隐藏

### 订单处理
订单状态流转：**待接单** → **制作中** → **已上菜** → **已支付**
- 厨房看到新订单后点"接单"
- 菜做好上桌后点"已上菜"
- 顾客付款后点"结账"

---

## 三、顾客端使用（扫码点餐）

### 制作桌台二维码
1. **查找本机IP**：
   - 按 `Win + R`，输入 `cmd`，回车
   - 输入 `ipconfig`，找到"IPv4 地址"（如 `192.168.1.88`）

2. **固定IP**（重要！防止重启后IP变化）：
   - 登录路由器管理页面（通常 192.168.1.1）
   - 找到"DHCP"或"IP绑定"设置
   - 将本机MAC地址绑定到固定IP

3. **生成二维码**：
   - 打开 https://cli.im 或任意二维码生成网站
   - 输入 `http://192.168.1.88:5000/?table=1`（替换IP和桌号）
   - 生成二维码并打印贴在对应餐桌上

### 顾客操作流程
1. 连接餐馆Wi-Fi
2. 手机扫描桌上二维码
3. 浏览菜单，点击"+"添加菜品
4. 点击底部"去下单"
5. 可添加备注（如"不要香菜"）
6. 确认下单

---

## 四、数据备份

数据库文件位置：`instance/guoqing.db`

### 手动备份
每周将 `guoqing.db` 文件复制到U盘或发送到微信文件传输助手。

---

## 五、常见问题

**Q: 外网断了能用吗？**  
A: 能！系统在局域网内运行，只要路由器和Wi-Fi正常就不受影响。

**Q: 手机打不开菜单页？**  
A: 确认手机连的是餐馆Wi-Fi，并检查电脑防火墙是否放行了5000端口。

**Q: 忘记管理密码？**  
A: 用记事本打开 `config.py`，修改 `ADMIN_PASSWORD` 的值。

**Q: 图片加载慢？**  
A: 上传前建议用手机拍照后直接上传，系统会自动压缩到800×800。原图尽量不超过5MB。
